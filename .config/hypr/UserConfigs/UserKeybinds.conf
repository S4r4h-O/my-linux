## ============================================
## User Custom Keybindings Configuration
## ============================================

## Variables
$mainMod = SUPER
$scriptsDir = $HOME/.config/hypr/scripts
$makoScriptsDir = $HOME/.config/hypr/scripts/mako
$dunstScriptDir = $HOME/.config/hypr/scripts/
$UserScripts = $HOME/.config/hypr/UserScripts
$UserConfigs = $HOME/.config/hypr/UserConfigs

## Source User Defaults
source= $UserConfigs/01-UserDefaults.conf

## ============================================
## Application Launcher Keybindings
## ============================================

bind = $mainMod, D, exec, pkill rofi || true && rofi -show drun -modi drun,filebrowser,run,window
bind = $mainMod, B, exec, xdg-open "https://"
bind = $mainMod, A, exec, pkill rofi || true && ags -t 'overview'
bind = $mainMod, Return, exec, $term
bind = $mainMod, E, exec, $files

## ============================================
## System Features and Utilities
## ============================================

## Help and Documentation
bind = $mainMod, H, exec, $scriptsDir/KeyHints.sh

## Workspace and Layout Management
bind = $mainMod ALT, R, exec, $scriptsDir/Refresh.sh
bind = $mainMod ALT, O, exec, $makoScriptsDir/ChangeBlur.sh
bind = $mainMod ALT, L, exec, $makoScriptsDir/ChangeLayout.sh

## Clipboard and Input
bind = $mainMod ALT, V, exec, $scriptsDir/ClipManager.sh
bind = $mainMod SHIFT, E, exec, rofimoji

## ============================================
## Window State Keybindings
## ============================================

bind = $mainMod SHIFT, F, fullscreen
bind = $mainMod, F, fullscreen, 1
bind = $mainMod, SPACE, togglefloating,
bind = $mainMod ALT, SPACE, exec, hyprctl dispatch workspaceopt allfloat
bind = $mainMod SHIFT, Return, exec, [float; move 15% 5%; size 70% 60%] $term

## ============================================
## Display and Window Positioning
## ============================================

## Mouse-based Window Control
bind = SUPER, mouse1, movewindow
bind = SUPER, F3, movecurrentworkspacetomonitor, HDMI-A-1

## Cursor Zoom/Magnifier
bind = $mainMod ALT, mouse_down, exec, hyprctl keyword cursor:zoom_factor "$(hyprctl getoption cursor:zoom_factor | awk 'NR==1 {factor = $2; if (factor < 1) {factor = 1}; print factor * 2.0}')"
bind = $mainMod ALT, mouse_up, exec, hyprctl keyword cursor:zoom_factor "$(hyprctl getoption cursor:zoom_factor | awk 'NR==1 {factor = $2; if (factor < 1) {factor = 1}; print factor / 2.0}')"

## Disabled: Zoom for Hyprland v0.39 (Ubuntu 24.04)
## bind = $mainMod ALT, mouse_down, exec, hyprctl keyword misc:cursor_zoom_factor "$(hyprctl getoption misc:cursor_zoom_factor | awk 'NR==1 {factor = $2; if (factor < 1) {factor = 1}; print factor * 2.0}')"
## bind = $mainMod ALT, mouse_up, exec, hyprctl keyword misc:cursor_zoom_factor "$(hyprctl getoption misc:cursor_zoom_factor | awk 'NR==1 {factor = $2; if (factor < 1) {factor = 1}; print factor / 2.0}')"

## ============================================
## Waybar Configuration
## ============================================

bind = $mainMod CTRL ALT, B, exec, pkill -SIGUSR1 waybar

## ============================================
## Window Properties
## ============================================

## Opacity Control
bind = $mainMod CTRL, O, exec, hyprctl setprop active opaque toggle

## Keybind Helper
bind = $mainMod SHIFT, K, exec, $scriptsDir/KeyBinds.sh

## ============================================
## Disabled: Keyboard Layout Switching
## ============================================

## bind = ALT_L, SHIFT_L, exec, $makoScriptsDir/SwitchKeyboardLayout.sh

## ============================================
## Disabled: Passthrough Keyboard Mode
## ============================================

## For VM or passthrough scenarios
## bind = $mainMod ALT, P, submap, passthru
## submap = passthru
## bind = $mainMod ALT, P, submap, reset
## submap = reset
